!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.starlings=r()}(this,function(){"use strict";return function(n,r,t,o,e,u,f,i,a,c,v,d){void 0===c&&(c=null),void 0===v&&(v=1),void 0===d&&(d=1);var l,m,s=r.length,p=function(n,r){var t=l.createShader(n);return l.shaderSource(t,r),l.compileShader(t),t},y=function(){for(var n=l.createBuffer(),o=new Float32Array(t*s*3),e=0,u=0;u<t;u+=1)for(var f=0,i=s;f<i;f+=1,e+=3){var a=r[f];o[e]=a.x,o[e+1]=a.y,o[e+2]=a.z}l.bindBuffer(l.ARRAY_BUFFER,n),l.bufferData(l.ARRAY_BUFFER,o,l.STATIC_DRAW);var c=l.getAttribLocation(m,"position");l.enableVertexAttribArray(c),l.vertexAttribPointer(c,3,l.FLOAT,!1,!1,0,0)},w=function(){for(var n=0;n<o.length;n+=1){for(var r=l.createBuffer(),e=o[n],u=e.data(0,0).length,f=new Float32Array(t*s*u),i=0;i<t;i+=1)for(var a=e.data(i,t),v=i*s*u,d=0;d<s;d+=1)for(var p=0;p<u;p+=1)null!==c&&e.name===c.attribute?f[v]=c.value(f[v],a,p,d):f[v]=a[p],v+=1;l.bindBuffer(l.ARRAY_BUFFER,r),l.bufferData(l.ARRAY_BUFFER,f,l.STATIC_DRAW);var y=l.getAttribLocation(m,o[n].name);l.enableVertexAttribArray(y),l.vertexAttribPointer(y,u,l.FLOAT,!1,!1,0,0)}},A=function(){e.push({name:"uMVP",type:"mat4"});for(var n=0;n<e.length;n+=1){var r=l.getUniformLocation(m,e[n].name);e[n].location=r}},F={float:function(n,r){return l.uniform1f(n,r)},vec2:function(n,r){return l.uniform2fv(n,r)},vec3:function(n,r){return l.uniform3fv(n,r)},vec4:function(n,r){return l.uniform4fv(n,r)},mat2:function(n,r){return l.uniformMatrix2fv(n,!1,r)},mat3:function(n,r){return l.uniformMatrix3fv(n,!1,r)},mat4:function(n,r){return l.uniformMatrix4fv(n,!1,r)}},b=function(){l.clear(16640),l.useProgram(m),a(l,m,e);for(var n=0;n<e.length;n+=1)F[e[n].type](e[n].location,e[n].value);l.drawArrays(l.TRIANGLES,0,s*t),requestAnimationFrame(b)},g=function(){n.width=n.clientWidth*d,n.height=n.clientHeight*d;var r=l.drawingBufferWidth,t=l.drawingBufferHeight;l.viewport(0,0,r,t),e[e.length-1].value=[v/(r/t),0,0,0,0,v,0,0,0,0,-1,-1,0,0,1,1]};l=n.getContext("webgl"),m=l.createProgram(),l.attachShader(m,p(l.VERTEX_SHADER,u)),l.attachShader(m,p(l.FRAGMENT_SHADER,f)),l.linkProgram(m),A(),g(),y(),w(),i(l),b(),window.addEventListener("resize",g,!1)}});